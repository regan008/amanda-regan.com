<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Dat Tutorial  &middot; Amanda Regan</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="description" content="" />

<meta name="keywords" content="">


<meta property="og:title" content="Dat Tutorial  &middot; Amanda Regan ">
<meta property="og:site_name" content="Amanda Regan"/>
<meta property="og:url" content="http://www.amanda-regan.com/2014/09/30/dat-tutorial/" />
<meta property="og:locale" content="en-EN">


<meta property="og:type" content="article" />
<meta property="og:description" content=""/>
<meta property="og:article:published_time" content="2014-09-30T02:54:05Z" />
<meta property="og:article:modified_time" content="2014-09-30T02:54:05Z" />

  

  
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@@regan008" />
<meta name="twitter:creator" content="@@regan008" />
<meta name="twitter:title" content="Dat Tutorial" />
<meta name="twitter:description" content="" />
<meta name="twitter:url" content="http://www.amanda-regan.com/2014/09/30/dat-tutorial/" />
<meta name="twitter:domain" content="http://www.amanda-regan.com/">
  

<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "Article",
    "headline": "Dat Tutorial",
    "author": {
      "@type": "Person",
      "name": "http://profiles.google.com/+?rel=author"
    },
    "datePublished": "2014-09-30",
    "description": "",
    "wordCount": 1740
  }
</script>



<link rel="canonical" href="http://www.amanda-regan.com/2014/09/30/dat-tutorial/" />

<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://www.amanda-regan.com/touch-icon-144-precomposed.png">
<link href="http://www.amanda-regan.com/favicon.png" rel="icon">

<meta name="generator" content="Hugo 0.53" />

  
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link href='https://fonts.googleapis.com/css?family=Merriweather:300%7CRaleway%7COpen+Sans' rel='stylesheet' type='text/css'>
<link href="https://use.fontawesome.com/releases/v5.0.6/css/all.css" rel="stylesheet">
<link rel="stylesheet" href="http://www.amanda-regan.com/css/style.css">
<link rel="stylesheet" href="http://www.amanda-regan.com/css/highlight/default.css">

  
  
	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-38020914-1', 'auto');
	  ga('send', 'pageview');

	</script>

</head>
<body>
  <main id="main-wrapper" class="container main_wrapper has-sidebar">
    <header id="main-header" class="container main_header">
  <div class="container brand">
  <div class="container title h1-like">
  <a class="baselink" href="http://www.amanda-regan.com/">
  Amanda Regan

</a>

</div>

  

</div>

  <nav class="container nav primary no-print">
  

<a class="homelink" href="http://www.amanda-regan.com/">About</a>


  
<a href="http://www.amanda-regan.com/c-v" title="My C.V.">C.V.</a>

<a href="http://www.amanda-regan.com/shapingup" title="Dissertation">Dissertation</a>

<a href="http://www.amanda-regan.com/portfolio" title="Digital Humanities Portfolio">Portfolio</a>

<a href="http://www.amanda-regan.com/post" title="Show list of posts">Blog</a>

<a href="http://www.amanda-regan.com/teaching" title="Teaching">Teaching</a>


</nav>

<div class="container nav secondary no-print">
  
<a id="contact-link-email" class="contact_link" href="mailto:aregan2@gmu.edu">
  <i class="fas fa-envelope"></i></a>



<a id="contact-link-github" class="contact_link" href="https://github.com/regan008">
  <i class="fab fa-github"></i></a>











<a id="contact-link-twitter" class="contact_link" href="https://twitter.com/@regan008">
  <i class="fab fa-twitter"></i></a>













</div>


  

</header>


<article id="main-content" class="container main_content single">
  <header class="container hat">
  <h1>Dat Tutorial
</h1>

  <div class="metas">
<time datetime="2014-09-30">30 Sep, 2014</time>


  
    &middot; by admin
  
  <br>
  


</div>

</header>

  <div class="container content">
  

<h2 id="what-is-dat">What is Dat?</h2>

<p><a href="www.data-dat.com">Dat</a> is a set of tools used to “build and share data pipelines.”  Dat was created with the goal of bringing “to data a style of collaboration similar to what git brings to source code.”  The project, developed by <a href="http://maxogden.com/">Max Ogden</a>, is designed to allow not only easy data sharing but also row by row version tracking. The five key features of Dat’s tools <a href="make%20data syncable. automatic sync and updates of data sets data sets can be very large (billions of rows or terabytes in size) and/or updated frequently (real time data) data can be either tabular (rows &amp; cells) or blobs (large files and/or unstructured) plugin APIs to connect dat to any existing database/format/language/storage backends built with automated workflows in mind">(as described by Dat’s GitHub page)</a> are:</p>

<ul>
<li><p>making data syncable (much like Git or GitHub)</p></li>

<li><p>data sets can be very large (billions of rows or terabytes in size) and/or updated frequently (real time data)</p></li>

<li><p>data can be either tabular (rows &amp; cells) or blobs (large files and/or unstructured)</p></li>

<li><p>plugin APIs to connect <code>dat</code> to any existing database/format/language/storage backends</p></li>

<li><p>built with automated workflows in mind</p></li>
</ul>

<p>This tutorial will walk through the basics of using dat for creating and managing a data set. We’ll begin with a simple dataset, then we’ll import the data into a new dat store, view the data, make changes, add new data, and view version history.  We’ll be working with dat on our local machine but keep in mind that Dat can also be deployed on a server to facilitate data sharing. Starting with just the basics of Dat showcases the tools potential and hopefully will be helpful for anybody creating large datasets by hand for class.</p>

<h2 id="dat-for-digital-historians">Dat for Digital Historians</h2>

<p><img src="http://www.amanda-regan.com/wp-content/uploads/2014/09/dat-hex-2.png" alt="dat-hex-2" /></p>

<p>I think Dat has the potential to be useful and for historians in several ways.  First, I think it’s useful to verify and keep track of the history of historical data sets. Because Dat allows you to track the version history, its easy to go through and verify the data.  Secondly, Dat is designed to allow data syncing.  So in theory, if you were collaborating with someone on creating a data set it would be possible to only sync the data that has changed since the last time you synced.  I think this has the potential to make collaborating and creating large datasets an easier and verifiable practice.  Max Ogden originally designed dat to be useful for Governments or large organizations who often make data available on their website in one massive csv file.  When it changes, you then have to go back in and redownload the csv, figure out whats new, and redo any formatting, reshaping, or calculations.  The goal of dat is to make that process easier by allowing the syncing of only the data that has changed.  Historical data doesn’t change very often but if you’re collecting data from various locations or sources I think Dat could be very useful.  If you’re interested you can read more about the history of dat and Ogden’s vision <a href="http://www.wired.com/2014/08/dat/">here</a>.</p>

<h2 id="get-the-data">Get the Data</h2>

<p>I’ve uploaded a GitHub repository that has some data for this tutorial. You can clone this repository so you can follow along with the data I’ve provided or you can use your own data. To clone the data run this in the terminal:</p>

<pre><code>`git clone https://github.com/regan008/DatTutorial.git`
</code></pre>

<h2 id="installation">Installation</h2>

<p>Dat is a node module and needs to be installed using the Node Package Manager(NPM) in the command line. You’ll need to have Node installed. More details on installing the proper version of Node.js can be found on the <a href="https://github.com/maxogden/dat">Dat GitHub Repository</a>. You can use this command to install node via the command line:</p>

<pre><code>`npm install dat -g`
</code></pre>

<p>If you get an error, you may need to use sudo before the command.</p>

<h2 id="ways-to-use-dat">Ways to Use Dat</h2>

<p>There are three main interfaces or APIs for Dat:</p>

<ul>
<li><p><a href="https://github.com/maxogden/dat/blob/master/docs/cli-usage.md">Command Line</a></p></li>

<li><p><a href="https://github.com/maxogden/dat/blob/master/docs/rest-api.md">REST API</a></p></li>

<li><p><a href="https://github.com/maxogden/dat/blob/master/docs/js-api.md">Javascript API</a></p></li>
</ul>

<p>We’ll cover the first two of these interfaces in this tutorial. The Command Line interface allows users to stream data to the dat store from CSV, TSV, or JSON files. The REST API provides access to the Dat graphical user interface (gui). In the GUI you can update data, attach files, and view various versions. Using this API you can also query the data store and generate csv/json copies of your data. The Javascript API is also useful but requires you to write your own code to interact with the database. I’ll include links to the examples in the Dat documentation and leave this api for you to experiment with.</p>

<h2 id="creating-a-dat-adding-viewing-data">Creating a Dat, Adding &amp; Viewing Data</h2>

<h3 id="initializing-a-dat-data-store">Initializing a Dat Data Store</h3>

<p>Dat’s command line interface is similar to Git. To begin, we need to initialize a new data store by using the <code>dat init</code> command. First lets navigate into the directory we cloned from GitHub and then use the <code>dat init</code> command.</p>

<pre><code>`cd DatTutorial
dat init`
</code></pre>

<p>Dat will prompt you for the Name, a description, and the publisher of the data. Once you’ve provided a value for each of those, Dat will create a new hidden directory called &lsquo;.dat’. This directory will house all of the data you stream into it. You can confirm that <code>dat inti</code> worked by running <code>ls -a</code> in your terminal to view all the hidden files.</p>

<h3 id="adding-data">Adding Data</h3>

<p>Dat will accept data in two forms: csv and line-seperated JSON. We’ll use csv data since that’s the most common way historians store data. To get a csv into dat we need to stream it in using the command line. You can stream your csv in using:</p>

<pre><code>`dat import --csv BostonGyms.csv`
</code></pre>

<p>Or:</p>

<pre><code>`cat BostonGyms.csv | dat import --csv`
</code></pre>

<p>Both commands do the same thing just in a slightly different way. The second command uses a pipe to direct the output of <code>cat BostonGyms.csv</code> into dat. When data is added Dat assigns each row of the csv a key and a version number. The key is a unique identifier that we can use to reference the row later. The version number is automatically updated every time a change is made to that row.</p>

<h3 id="viewing-data-in-the-dat-gui">Viewing Data in the Dat GUI</h3>

<p>Now that our data is stored in dat it would be useful to be able to view it. To view the data we can launch the Dat GUI by running <code>dat listen</code> in the terminal. This command returns a message that says “Listening on port xxxx. (In my case port 6461 but change it to whatever is printed in your terminal.) What this means is that Dat has started a new local webserver on our computer and if we navigate to localhost:6461 in a web browser we’ll see the Dat GUI. This interface, built on the LevelUp Database, allows us to interact with the data like we would a database.</p>

<figure>
    <img src="/images/Screen-Shot-2014-09-28-at-4.58.01-PM.png"/> <figcaption>
            <h4>Dat’s Graphical User Interface (GUI)</h4>
        </figcaption>
</figure>


<p>In this interface we can update any cell by clicking on the green edit button that appears when hovering over it. If we make a change to any cell and click update, Dat will store a new version of that row and change the version number to 2. Notice that the row’s version number changes but the key doesn’t.</p>

<figure>
    <img src="/images/Screen-Shot-2014-09-28-at-4.58.12-PM.png"/> <figcaption>
            <h4>Editing an individual cell</h4>
        </figcaption>
</figure>


<p>Clicking on the icon in the far left cell brings up a Row summary with each column name, corresponding value, and an option to upload a Blob. A “Blob” is simply an attached file. Here we could upload a file that relates to the data in a particular row. Dat will store the metadata for the file and any changes to to it in the database but will not store changes to the contents of the file.</p>

<figure>
    <img src="/images/Screen-Shot-2014-09-28-at-5.43.11-PM.png"/> <figcaption>
            <h4>The ‘Inspect Row’ dialog box. Here you can view a summary of the data in the row and attach a Blob (a file).</h4>
        </figcaption>
</figure>


<h3 id="viewing-data-via-the-rest-api">Viewing Data via the REST API</h3>

<p>In addition to the dat-editor GUI data in Dat can also be explored through the Rest API. The api exits when the local web server is launched (<code>dat listen</code>) and the views can be found at localhost:6461/api. Try going to:</p>

<p><strong>localhost:6461/api</strong> This page will return JSON data about the dat. This is particularly useful if you’re accessing data that isn’t yours. The API will list the:</p>

<ul>
<li><p>the name of the dat store</p></li>

<li><p>the version</p></li>

<li><p>how many changes have been made</p></li>

<li><p>how many rows</p></li>

<li><p>the approximate size of the store</p></li>
</ul>

<p><strong>localhost:6461/api/rows</strong> This page will return a list of the rows and all of the data associated with them. This is useful if you need to access the key of a particular item or if you want to pull the JSON into another program.</p>

<p><strong>localhost:6461/api/rows:key</strong> Adding a particular key onto the end of the url will return the data in that particular row.</p>

<p>This is just a brief overview of the REST API. More details can be found on the <a href="https://github.com/maxogden/dat/blob/master/docs/rest-api.md">Dat GitHub Wiki</a>.</p>

<p>Back in the command line, we can exit the local server by quitting the process with control-c</p>

<h3 id="adding-more-data">Adding More Data</h3>

<p>Once we’ve got data into Dat we may want to add an additional row or row(s). This is easy to do in the dat CLI interface. We can add a new row by using JSON and referencing the column names and corresponding data. That might look something like this:</p>

<pre><code>`echo '{“name”: “Dover-street Bath-house”, “month”: “March”, “Year”: 1913, “males”:10150, “females”: 2591}' | dat import --json`
</code></pre>

<p>That’s useful but it might be better to import more than one line at once. We can do this by streaming in a file of line separated JSON. The file BostonGyms.json contains some data we haven’t added. The json looks like this:</p>

<figure>
    <img src="/images/Screen-Shot-2014-09-28-at-5.11.21-PM.png"/> <figcaption>
            <h4>Data formatted as Line Separated JSON</h4>
        </figcaption>
</figure>


<p>To pipe it into our dat database we can run: <code>cat BostonGyms.json | dat import --json</code></p>

<p>The new rows will show up in our database. We can see them by running <code>dat listen</code> and going to the last page.</p>

<h2 id="the-javascript-interface">The Javascript Interface</h2>

<p>The command line and REST API in Dat is useful and allows you to add, change, and view data quickly and easily. However, Dat also offers a JavaScript API which can be extremely useful as well. There are several excellent examples of how to use the api on the <a href="https://github.com/maxogden/dat/tree/master/docs/dat-js-examples">Dat GitHub repository</a>.</p>

<h2 id="conclusions-dat-and-reproducible-research">Conclusions: Dat and Reproducible Research</h2>

<p>Dat is a powerful tool for data sharing, collaboration, and version control.  We’ve only used it on our local server, but Dat provides tools for uploading data to a server and creating pipelines through which large datasets can be easily shared, updated, and managed.  For digital historians practicing reproducible research, Dat makes it easy to share data with others.  Dat is only in its Alpha release but with funding from the Sloan Foundation the tools will continue to be built out and can be extremely beneficial for researchers in all disciplines.</p>

</div>


  <footer class="container">

</footer>

</article>
      <footer id="main-footer" class="container main_footer">
  

  
  <div class="container credits">
  
</div>

  <p><small>Last updated: September 30, 2014</small></p>
</footer>

    </main>
    
<script type="text/javascript">
  (function() {
    
    
    if (window.location.hostname == "localhost")
      return;

    var dsq = document.createElement('script'); dsq.async = true; dsq.type = 'text/javascript';
    dsq.src = '//amanda-regan.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>



<script src="http://www.amanda-regan.com/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


    
  </body>
</html>

